{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/eddie.cm.lam/Desktop/eddie_proj/REdataProj/listingsviewapp/src/App.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useReducer } from \"react\";\nimport XLSX from \"xlsx\";\nimport DataTable from \"./components/DataTable\";\nimport Filters from \"./components/Filters\";\n\nfunction reducer(state, action) {\n  const {\n    type,\n    payload\n  } = action;\n\n  switch (type) {\n    case \"COLLAPSE_FILTERS\":\n      return { ...state,\n        filtersCollapsed: payload\n      };\n\n    case \"SET_DATAREADY\":\n      return { ...state,\n        dataReady: payload\n      };\n\n    case \"UPDATE_DATA\":\n      return { ...state,\n        data: payload\n      };\n\n    case \"SET_LOADED\":\n      return { ...state,\n        loaded: payload\n      };\n\n    case \"SET_FAIL\":\n      return { ...state,\n        fail: payload\n      };\n\n    case \"SET_MINPRICE\":\n      return { ...state,\n        minPrice: payload\n      };\n\n    case \"SET_MAXPRICE\":\n      return { ...state,\n        maxPrice: payload\n      };\n\n    case \"SET_ESTATE\":\n      return { ...state,\n        estate: payload\n      };\n\n    case \"SET_ERROR\":\n      return { ...state,\n        error: payload\n      };\n\n    case \"ENABLE_ESTATEFILTER\":\n      return { ...state,\n        enableEstateFilter: payload\n      };\n\n    case \"SET_MINFLOOR\":\n      return { ...state,\n        minFloor: payload\n      };\n\n    case \"SET_MAXFLOOR\":\n      return { ...state,\n        maxFloor: payload\n      };\n\n    case \"SET_SPEC\":\n      return { ...state,\n        spec: payload\n      };\n\n    case \"ENABLE_SPECFILTER\":\n      return { ...state,\n        enableSpecFilter: payload\n      };\n\n    case \"SET_REGION\":\n      return { ...state,\n        region: payload\n      };\n\n    case \"ENABLE_REGIONFILTER\":\n      return { ...state,\n        enableRegionFilter: payload\n      };\n\n    case \"SET_MINUSABLEAREA\":\n      return { ...state,\n        minUsableArea: payload\n      };\n\n    case \"SET_MAXUSABLEAREA\":\n      return { ...state,\n        maxUsableArea: payload\n      };\n\n    default:\n      return state;\n  }\n}\n\nfunction App() {\n  _s();\n\n  const initialState = {\n    data: [],\n    filtersCollapsed: false,\n    loaded: false,\n    fail: false,\n    minPrice: 0,\n    maxPrice: '',\n    minFloor: 0,\n    maxFloor: '',\n    error: false,\n    estate: \"\",\n    enableEstateFilter: false,\n    spec: \"\",\n    enableSpecFilter: false,\n    region: \"\",\n    enableRegionFilter: false,\n    minUsableArea: 0,\n    maxUsableArea: ''\n  };\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const {\n    data,\n    filtersCollapsed,\n    loaded,\n    fail,\n    error,\n    minPrice,\n    maxPrice,\n    minFloor,\n    maxFloor,\n    estate,\n    enableEstateFilter,\n    spec,\n    enableSpecFilter,\n    region,\n    enableRegionFilter,\n    minUsableArea,\n    maxUsableArea\n  } = state;\n  /**\n   * triggered when user uploads a file;\n   * mainly for updating file if need be\n   */\n\n  const readFile = file => {\n    const promise = new Promise((res, rej) => {\n      /* read file */\n      const fileReader = new FileReader();\n      fileReader.readAsArrayBuffer(file);\n\n      fileReader.onload = e => {\n        const arrayBuffer = e.target.result;\n        /* now can read workbook */\n\n        const workbook = XLSX.read(arrayBuffer, {\n          type: \"buffer\"\n        });\n        const worksheetName = workbook.SheetNames[0];\n        const workSheet = workbook.Sheets[worksheetName];\n        const data = XLSX.utils.sheet_to_json(workSheet);\n        res(data);\n      };\n\n      fileReader.onerror = err => rej(err);\n    });\n    promise.then(d => {\n      dispatch({\n        type: \"UPDATE_DATA\",\n        payload: d[0]\n      });\n      dispatch({\n        type: \"SET_LOADED\",\n        payload: true\n      });\n      return;\n    });\n  };\n  /* fetching data and update data state on mount */\n\n\n  useEffect(() => {\n    /* fetch data from ./public/data.json */\n    fetch(\"data.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(response => {\n      return response.json();\n    }).then(data => {\n      dispatch({\n        type: \"UPDATE_DATA\",\n        payload: data[0]\n      });\n      dispatch({\n        type: \"SET_ESTATE\",\n        payload: data[0][0][\"Estate\"]\n      });\n      dispatch({\n        type: \"SET_SPEC\",\n        payload: data[0][0][\"Spec\"]\n      });\n      dispatch({\n        type: \"SET_REGION\",\n        payload: data[0][0][\"Region\"]\n      });\n      dispatch({\n        type: \"SET_LOADED\",\n        payload: true\n      });\n      return;\n    }).catch(err => {\n      dispatch({\n        type: \"SET_LOADED\",\n        payload: true\n      });\n      dispatch({\n        type: \"SET_FAIL\",\n        payload: true\n      });\n      throw err;\n    });\n  }, []);\n\n  const handleSetMinPrice = e => {\n    dispatch({\n      type: \"SET_MINPRICE\",\n      payload: e.target.value\n    });\n  };\n\n  const handleSetMaxPrice = e => {\n    dispatch({\n      type: \"SET_MAXPRICE\",\n      payload: e.target.value\n    });\n  };\n\n  const handleSetMinFloor = e => {\n    dispatch({\n      type: 'SET_MINFLOOR',\n      payload: e.target.value\n    });\n  };\n\n  const handleSetMaxFloor = e => {\n    dispatch({\n      type: 'SET_MAXFLOOR',\n      payload: e.target.value\n    });\n  };\n\n  const handleSetEstate = e => {\n    dispatch({\n      type: \"SET_ESTATE\",\n      payload: e.target.value\n    });\n  };\n\n  const handleSetUseEstateFilter = () => {\n    dispatch({\n      type: \"ENABLE_ESTATEFILTER\",\n      payload: !enableEstateFilter\n    });\n  };\n\n  const handleSetSpec = e => {\n    dispatch({\n      type: \"SET_SPEC\",\n      payload: e.target.value\n    });\n  };\n\n  const handleSetUseSpecFilter = () => {\n    dispatch({\n      type: \"ENABLE_SPECFILTER\",\n      payload: !enableSpecFilter\n    });\n  };\n\n  const handleSetRegion = e => {\n    dispatch({\n      type: \"SET_REGION\",\n      payload: e.target.value\n    });\n  };\n\n  const handleSetUseRegionFilter = () => {\n    dispatch({\n      type: \"ENABLE_REGIONFILTER\",\n      payload: !enableRegionFilter\n    });\n  };\n\n  const handleSetMinUsableArea = e => {\n    dispatch({\n      type: \"SET_MINUSABLEAREA\",\n      payload: e.target.value\n    });\n  };\n\n  const handleSetMaxUsableArea = e => {\n    dispatch({\n      type: \"SET_MAXUSABLEAREA\",\n      payload: e.target.value\n    });\n  };\n\n  const handleCollapseFilters = () => {\n    dispatch({\n      type: \"COLLAPSE_FILTERS\",\n      payload: !filtersCollapsed\n    });\n  }; // get Estate options\n\n\n  let estateArr = [];\n  data.map(obj => {\n    return estateArr.indexOf(obj.Estate) === -1 && estateArr.push(obj.Estate);\n  }); // get Spec options\n\n  let specArr = [];\n  data.map(obj => {\n    return specArr.indexOf(obj.Spec) === -1 && specArr.push(obj.Spec);\n  }); // get Region options\n\n  let regionArr = [];\n  data.map(obj => {\n    return regionArr.indexOf(obj.Region) === -1 && regionArr.push(obj.Region);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"EddieLogo\",\n      children: [\"Eddie Lam \", /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"made this.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 37\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Filters\n    /* collapse control */\n    , {\n      filtersCollapsed: filtersCollapsed,\n      handleCollapseFilters: handleCollapseFilters\n      /* filtering price */\n      ,\n      minPrice: minPrice,\n      maxPrice: maxPrice,\n      setMinPriceHandler: handleSetMinPrice,\n      setMaxPriceHandler: handleSetMaxPrice\n      /* filtering floors */\n      ,\n      minFloor: minFloor,\n      maxFloor: maxFloor,\n      setMinFloorHandler: handleSetMinFloor,\n      setMaxFloorHandler: handleSetMaxFloor\n      /* filtering usable area */\n      ,\n      minUsableArea: minUsableArea,\n      maxUsableArea: maxUsableArea,\n      setMinUsableAreaHandler: handleSetMinUsableArea,\n      setMaxUsableAreaHandler: handleSetMaxUsableArea\n      /* filtering estates */\n      ,\n      enableEstateFilter: enableEstateFilter,\n      estateValue: estate,\n      estateOptions: estateArr,\n      setEstateHandler: handleSetEstate,\n      setEnableEstateFilterHandler: handleSetUseEstateFilter\n      /* filtering spec */\n      ,\n      enableSpecFilter: enableSpecFilter,\n      specValue: spec,\n      specOptions: specArr,\n      setSpecHandler: handleSetSpec,\n      setEnableSpecFilterHandler: handleSetUseSpecFilter\n      /* filtering region */\n      ,\n      enableRegionFilter: enableRegionFilter,\n      regionValue: region,\n      regionOptions: regionArr,\n      setRegionHandler: handleSetRegion,\n      setEnableRegionFilterHandler: handleSetUseRegionFilter\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this), !fail ? loaded ? error ? /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(DataTable, {\n      data: data,\n      minPrice: minPrice,\n      maxPrice: maxPrice,\n      minFloor: minFloor,\n      maxFloor: maxFloor,\n      minUsableArea: minUsableArea,\n      maxUsableArea: maxUsableArea,\n      estate: estate,\n      enableEstateFilter: enableEstateFilter,\n      spec: spec,\n      enableSpecFilter: enableSpecFilter,\n      region: region,\n      enableRegionFilter: enableRegionFilter\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Still loading data...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Failed to fetch data...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 211,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"bgCdjuTOmPdSBRwTap80EFd9Y3U=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/eddie.cm.lam/Desktop/eddie_proj/REdataProj/listingsviewapp/src/App.jsx"],"names":["React","useEffect","useReducer","XLSX","DataTable","Filters","reducer","state","action","type","payload","filtersCollapsed","dataReady","data","loaded","fail","minPrice","maxPrice","estate","error","enableEstateFilter","minFloor","maxFloor","spec","enableSpecFilter","region","enableRegionFilter","minUsableArea","maxUsableArea","App","initialState","dispatch","readFile","file","promise","Promise","res","rej","fileReader","FileReader","readAsArrayBuffer","onload","e","arrayBuffer","target","result","workbook","read","worksheetName","SheetNames","workSheet","Sheets","utils","sheet_to_json","onerror","err","then","d","fetch","headers","response","json","catch","handleSetMinPrice","value","handleSetMaxPrice","handleSetMinFloor","handleSetMaxFloor","handleSetEstate","handleSetUseEstateFilter","handleSetSpec","handleSetUseSpecFilter","handleSetRegion","handleSetUseRegionFilter","handleSetMinUsableArea","handleSetMaxUsableArea","handleCollapseFilters","estateArr","map","obj","indexOf","Estate","push","specArr","Spec","regionArr","Region"],"mappings":"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","sourcesContent":["import React, { useEffect, useReducer } from \"react\";\nimport XLSX from \"xlsx\";\nimport DataTable from \"./components/DataTable\";\nimport Filters from \"./components/Filters\";\n\nfunction reducer(state, action) {\n  const { type, payload } = action;\n\n  switch (type) {\n    case \"COLLAPSE_FILTERS\":\n      return {...state, filtersCollapsed: payload};\n    case \"SET_DATAREADY\":\n      return { ...state, dataReady: payload };\n    case \"UPDATE_DATA\":\n      return { ...state, data: payload };\n    case \"SET_LOADED\":\n      return { ...state, loaded: payload };\n    case \"SET_FAIL\":\n      return { ...state, fail: payload };\n    case \"SET_MINPRICE\":\n      return { ...state, minPrice: payload };\n    case \"SET_MAXPRICE\":\n      return { ...state, maxPrice: payload };\n    case \"SET_ESTATE\":\n      return { ...state, estate: payload };\n    case \"SET_ERROR\":\n      return { ...state, error: payload };\n    case \"ENABLE_ESTATEFILTER\":\n      return {...state, enableEstateFilter: payload};\n    case \"SET_MINFLOOR\":\n      return {...state, minFloor: payload};\n    case \"SET_MAXFLOOR\":\n      return {...state, maxFloor: payload};\n    case \"SET_SPEC\":\n      return {...state, spec: payload};\n    case \"ENABLE_SPECFILTER\":\n      return {...state, enableSpecFilter: payload};\n    case \"SET_REGION\":\n      return {...state, region: payload};\n    case \"ENABLE_REGIONFILTER\":\n      return {...state, enableRegionFilter: payload};\n    case \"SET_MINUSABLEAREA\":\n      return {...state, minUsableArea: payload};\n    case \"SET_MAXUSABLEAREA\":\n      return {...state, maxUsableArea: payload};\n    default:\n      return state;\n  }\n}\n\nfunction App() {\n  const initialState = {\n    data: [],\n    filtersCollapsed: false,\n    loaded: false,\n    fail: false,\n    minPrice: 0,\n    maxPrice: '',\n    minFloor: 0,\n    maxFloor: '',\n    error: false,\n    estate: \"\",\n    enableEstateFilter: false,\n    spec:\"\",\n    enableSpecFilter: false,\n    region: \"\",\n    enableRegionFilter: false,\n    minUsableArea: 0,\n    maxUsableArea: ''\n  };\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const { \n    data, \n    filtersCollapsed,\n    loaded, fail, error,\n    minPrice, maxPrice, \n    minFloor, maxFloor,\n    estate, enableEstateFilter,\n    spec, enableSpecFilter,\n    region, enableRegionFilter,\n    minUsableArea, maxUsableArea\n  } = state;\n\n  /**\n   * triggered when user uploads a file;\n   * mainly for updating file if need be\n   */\n  const readFile = (file) => {\n    const promise = new Promise((res, rej) => {\n      /* read file */\n      const fileReader = new FileReader();\n      fileReader.readAsArrayBuffer(file);\n\n      fileReader.onload = (e) => {\n        const arrayBuffer = e.target.result;\n        /* now can read workbook */\n        const workbook = XLSX.read(arrayBuffer, { type: \"buffer\" });\n        const worksheetName = workbook.SheetNames[0];\n        const workSheet = workbook.Sheets[worksheetName];\n        const data = XLSX.utils.sheet_to_json(workSheet);\n        res(data);\n      };\n\n      fileReader.onerror = (err) => rej(err);\n    });\n\n    promise.then((d) => {\n      dispatch({ type: \"UPDATE_DATA\", payload: d[0] });\n      dispatch({ type: \"SET_LOADED\", payload: true });\n      return;\n    });\n  };\n\n  /* fetching data and update data state on mount */\n  useEffect(() => {\n    /* fetch data from ./public/data.json */\n    fetch(\"data.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        dispatch({ type: \"UPDATE_DATA\", payload: data[0] });\n        dispatch({ type: \"SET_ESTATE\", payload: data[0][0][\"Estate\"] });\n        dispatch({ type: \"SET_SPEC\", payload: data[0][0][\"Spec\"] });\n        dispatch({ type: \"SET_REGION\", payload: data[0][0][\"Region\"] });\n        dispatch({ type: \"SET_LOADED\", payload: true });\n        return;\n      })\n      .catch((err) => {\n        dispatch({ type: \"SET_LOADED\", payload: true });\n        dispatch({ type: \"SET_FAIL\", payload: true });\n        throw err;\n      });\n  }, []);\n\n  const handleSetMinPrice = (e) => {\n    dispatch({ type: \"SET_MINPRICE\", payload: e.target.value });\n  };\n\n  const handleSetMaxPrice = (e) => {\n    dispatch({ type: \"SET_MAXPRICE\", payload: e.target.value });\n  };\n\n  const handleSetMinFloor = (e) => {\n    dispatch({type: 'SET_MINFLOOR', payload: e.target.value})\n  }\n\n  const handleSetMaxFloor = (e) => {\n    dispatch({type: 'SET_MAXFLOOR', payload: e.target.value})\n  }\n\n  const handleSetEstate = (e) => {\n    dispatch({ type: \"SET_ESTATE\", payload: e.target.value });\n  };\n\n  const handleSetUseEstateFilter = () => {\n    dispatch({type: \"ENABLE_ESTATEFILTER\", payload: !enableEstateFilter});\n  }\n\n  const handleSetSpec = (e) => {\n    dispatch({type: \"SET_SPEC\", payload: e.target.value})\n  }\n\n  const handleSetUseSpecFilter = () => {\n    dispatch({type: \"ENABLE_SPECFILTER\", payload: !enableSpecFilter});\n  }\n\n  const handleSetRegion = (e) => {\n    dispatch({type: \"SET_REGION\", payload: e.target.value})\n  }\n\n  const handleSetUseRegionFilter = () => {\n    dispatch({type: \"ENABLE_REGIONFILTER\", payload: !enableRegionFilter});\n  }\n\n  const handleSetMinUsableArea = (e) => {\n    dispatch({type: \"SET_MINUSABLEAREA\", payload: e.target.value})\n  }\n\n  const handleSetMaxUsableArea = (e) => {\n    dispatch({type: \"SET_MAXUSABLEAREA\", payload: e.target.value})\n  }\n\n  const handleCollapseFilters = () => {\n    dispatch({type: \"COLLAPSE_FILTERS\", payload: !filtersCollapsed})\n  }\n\n  // get Estate options\n  let estateArr = [];\n  data.map((obj) => {\n    return estateArr.indexOf(obj.Estate) === -1 && estateArr.push(obj.Estate);\n  });\n\n  // get Spec options\n  let specArr = [];\n  data.map(obj=>{\n    return specArr.indexOf(obj.Spec) === -1 && specArr.push(obj.Spec);\n  })\n\n  // get Region options\n  let regionArr = [];\n  data.map(obj=>{\n    return regionArr.indexOf(obj.Region) === -1 && regionArr.push(obj.Region);\n  })\n\n  return (\n    <div className=\"App\">\n\n      <div id=\"EddieLogo\">Eddie Lam <span>made this.</span></div>\n\n\n      {/* <input\n        type=\"file\"\n        name=\"XlFileLoader\"\n        id=\"XlFileLoader\"\n        accept=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\n        onChange={(e) => {\n          dispatch({ type: \"SET_LOADED\", payload: false });\n          const file = e.target.files[0];\n          readFile(file);\n        }}\n      /> */}\n\n      <Filters\n        /* collapse control */\n        filtersCollapsed={filtersCollapsed}\n        handleCollapseFilters={handleCollapseFilters}\n        /* filtering price */\n        minPrice={minPrice}\n        maxPrice={maxPrice}\n        setMinPriceHandler={handleSetMinPrice}\n        setMaxPriceHandler={handleSetMaxPrice}\n        /* filtering floors */\n        minFloor={minFloor}\n        maxFloor={maxFloor}\n        setMinFloorHandler={handleSetMinFloor}\n        setMaxFloorHandler={handleSetMaxFloor}\n        /* filtering usable area */ \n        minUsableArea={minUsableArea}\n        maxUsableArea={maxUsableArea}\n        setMinUsableAreaHandler={handleSetMinUsableArea}\n        setMaxUsableAreaHandler={handleSetMaxUsableArea}\n        /* filtering estates */\n        enableEstateFilter={enableEstateFilter}\n        estateValue={estate}\n        estateOptions={estateArr}\n        setEstateHandler={handleSetEstate}\n        setEnableEstateFilterHandler={handleSetUseEstateFilter}\n        /* filtering spec */\n        enableSpecFilter={enableSpecFilter}\n        specValue={spec}\n        specOptions={specArr}\n        setSpecHandler={handleSetSpec}\n        setEnableSpecFilterHandler={handleSetUseSpecFilter}\n        /* filtering region */\n        enableRegionFilter={enableRegionFilter}\n        regionValue={region}\n        regionOptions={regionArr}\n        setRegionHandler={handleSetRegion}\n        setEnableRegionFilterHandler={handleSetUseRegionFilter}\n      />\n\n      {!fail ? (\n        loaded ? (\n          error ? (\n            <h1>{error}</h1>\n          ) : (\n            <DataTable\n              data={data}\n              minPrice={minPrice}\n              maxPrice={maxPrice}\n              minFloor={minFloor}\n              maxFloor={maxFloor}\n              minUsableArea={minUsableArea}\n              maxUsableArea={maxUsableArea}\n              estate={estate}\n              enableEstateFilter={enableEstateFilter}\n              spec={spec}\n              enableSpecFilter={enableSpecFilter}\n              region={region}\n              enableRegionFilter={enableRegionFilter}\n            />\n          )\n        ) : (\n          <h1>Still loading data...</h1>\n        )\n      ) : (\n        <h1>Failed to fetch data...</h1>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}