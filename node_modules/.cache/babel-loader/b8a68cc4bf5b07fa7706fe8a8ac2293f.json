{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/eddie.cm.lam/Desktop/eddie_proj/REdataProj/listingsviewapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/eddie.cm.lam/Desktop/eddie_proj/REdataProj/listingsviewapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect,useReducer}from\"react\";import XLSX from\"xlsx\";import DataTable from\"./components/DataTable\";import Filters from\"./components/Filters\";function reducer(state,action){var type=action.type,payload=action.payload;switch(type){case\"COLLAPSE_FILTERS\":return _objectSpread(_objectSpread({},state),{},{filtersCollapsed:payload});case\"SET_DATAREADY\":return _objectSpread(_objectSpread({},state),{},{dataReady:payload});case\"UPDATE_DATA\":return _objectSpread(_objectSpread({},state),{},{data:payload});case\"SET_LOADED\":return _objectSpread(_objectSpread({},state),{},{loaded:payload});case\"SET_FAIL\":return _objectSpread(_objectSpread({},state),{},{fail:payload});case\"SET_MINPRICE\":return _objectSpread(_objectSpread({},state),{},{minPrice:payload});case\"SET_MAXPRICE\":return _objectSpread(_objectSpread({},state),{},{maxPrice:payload});case\"SET_ESTATE\":return _objectSpread(_objectSpread({},state),{},{estate:payload});case\"SET_ERROR\":return _objectSpread(_objectSpread({},state),{},{error:payload});case\"ENABLE_ESTATEFILTER\":return _objectSpread(_objectSpread({},state),{},{enableEstateFilter:payload});case\"SET_MINFLOOR\":return _objectSpread(_objectSpread({},state),{},{minFloor:payload});case\"SET_MAXFLOOR\":return _objectSpread(_objectSpread({},state),{},{maxFloor:payload});case\"SET_SPEC\":return _objectSpread(_objectSpread({},state),{},{spec:payload});case\"ENABLE_SPECFILTER\":return _objectSpread(_objectSpread({},state),{},{enableSpecFilter:payload});case\"SET_REGION\":return _objectSpread(_objectSpread({},state),{},{region:payload});case\"ENABLE_REGIONFILTER\":return _objectSpread(_objectSpread({},state),{},{enableRegionFilter:payload});case\"SET_MINUSABLEAREA\":return _objectSpread(_objectSpread({},state),{},{minUsableArea:payload});case\"SET_MAXUSABLEAREA\":return _objectSpread(_objectSpread({},state),{},{maxUsableArea:payload});default:return state;}}function App(){var initialState={data:[],filtersCollapsed:false,loaded:false,fail:false,minPrice:0,maxPrice:'',minFloor:0,maxFloor:'',error:false,estate:\"\",enableEstateFilter:false,spec:\"\",enableSpecFilter:false,region:\"\",enableRegionFilter:false,minUsableArea:0,maxUsableArea:''};var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var data=state.data,filtersCollapsed=state.filtersCollapsed,loaded=state.loaded,fail=state.fail,error=state.error,minPrice=state.minPrice,maxPrice=state.maxPrice,minFloor=state.minFloor,maxFloor=state.maxFloor,estate=state.estate,enableEstateFilter=state.enableEstateFilter,spec=state.spec,enableSpecFilter=state.enableSpecFilter,region=state.region,enableRegionFilter=state.enableRegionFilter,minUsableArea=state.minUsableArea,maxUsableArea=state.maxUsableArea;/**\n   * triggered when user uploads a file;\n   * mainly for updating file if need be\n   */var readFile=function readFile(file){var promise=new Promise(function(res,rej){/* read file */var fileReader=new FileReader();fileReader.readAsArrayBuffer(file);fileReader.onload=function(e){var arrayBuffer=e.target.result;/* now can read workbook */var workbook=XLSX.read(arrayBuffer,{type:\"buffer\"});var worksheetName=workbook.SheetNames[0];var workSheet=workbook.Sheets[worksheetName];var data=XLSX.utils.sheet_to_json(workSheet);res(data);};fileReader.onerror=function(err){return rej(err);};});promise.then(function(d){dispatch({type:\"UPDATE_DATA\",payload:d[0]});dispatch({type:\"SET_LOADED\",payload:true});return;});};/* fetching data and update data state on mount */useEffect(function(){/* fetch data from ./public/data.json */fetch(\"data.json\",{headers:{\"Content-Type\":\"application/json\"}}).then(function(response){return response.json();}).then(function(data){dispatch({type:\"UPDATE_DATA\",payload:data[0]});dispatch({type:\"SET_ESTATE\",payload:data[0][0][\"Estate\"]});dispatch({type:\"SET_SPEC\",payload:data[0][0][\"Spec\"]});dispatch({type:\"SET_REGION\",payload:data[0][0][\"Region\"]});dispatch({type:\"SET_LOADED\",payload:true});return;}).catch(function(err){dispatch({type:\"SET_LOADED\",payload:true});dispatch({type:\"SET_FAIL\",payload:true});throw err;});},[]);var handleSetMinPrice=function handleSetMinPrice(e){dispatch({type:\"SET_MINPRICE\",payload:e.target.value});};var handleSetMaxPrice=function handleSetMaxPrice(e){dispatch({type:\"SET_MAXPRICE\",payload:e.target.value});};var handleSetMinFloor=function handleSetMinFloor(e){dispatch({type:'SET_MINFLOOR',payload:e.target.value});};var handleSetMaxFloor=function handleSetMaxFloor(e){dispatch({type:'SET_MAXFLOOR',payload:e.target.value});};var handleSetEstate=function handleSetEstate(e){dispatch({type:\"SET_ESTATE\",payload:e.target.value});};var handleSetUseEstateFilter=function handleSetUseEstateFilter(){dispatch({type:\"ENABLE_ESTATEFILTER\",payload:!enableEstateFilter});};var handleSetSpec=function handleSetSpec(e){dispatch({type:\"SET_SPEC\",payload:e.target.value});};var handleSetUseSpecFilter=function handleSetUseSpecFilter(){dispatch({type:\"ENABLE_SPECFILTER\",payload:!enableSpecFilter});};var handleSetRegion=function handleSetRegion(e){dispatch({type:\"SET_REGION\",payload:e.target.value});};var handleSetUseRegionFilter=function handleSetUseRegionFilter(){dispatch({type:\"ENABLE_REGIONFILTER\",payload:!enableRegionFilter});};var handleSetMinUsableArea=function handleSetMinUsableArea(e){dispatch({type:\"SET_MINUSABLEAREA\",payload:e.target.value});};var handleSetMaxUsableArea=function handleSetMaxUsableArea(e){dispatch({type:\"SET_MAXUSABLEAREA\",payload:e.target.value});};var handleCollapseFilters=function handleCollapseFilters(){dispatch({type:\"COLLAPSE_FILTERS\",payload:!filtersCollapsed});};// get Estate options\nvar estateArr=[];data.map(function(obj){return estateArr.indexOf(obj.Estate)===-1&&estateArr.push(obj.Estate);});// get Spec options\nvar specArr=[];data.map(function(obj){return specArr.indexOf(obj.Spec)===-1&&specArr.push(obj.Spec);});// get Region options\nvar regionArr=[];data.map(function(obj){return regionArr.indexOf(obj.Region)===-1&&regionArr.push(obj.Region);});return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"EddieLogo\",children:[\"Eddie Lam \",/*#__PURE__*/_jsx(\"span\",{children:\"made this.\"})]}),/*#__PURE__*/_jsx(Filters/* collapse control */,{filtersCollapsed:filtersCollapsed,handleCollapseFilters:handleCollapseFilters/* filtering price */,minPrice:minPrice,maxPrice:maxPrice,setMinPriceHandler:handleSetMinPrice,setMaxPriceHandler:handleSetMaxPrice/* filtering floors */,minFloor:minFloor,maxFloor:maxFloor,setMinFloorHandler:handleSetMinFloor,setMaxFloorHandler:handleSetMaxFloor/* filtering usable area */,minUsableArea:minUsableArea,maxUsableArea:maxUsableArea,setMinUsableAreaHandler:handleSetMinUsableArea,setMaxUsableAreaHandler:handleSetMaxUsableArea/* filtering estates */,enableEstateFilter:enableEstateFilter,estateValue:estate,estateOptions:estateArr,setEstateHandler:handleSetEstate,setEnableEstateFilterHandler:handleSetUseEstateFilter/* filtering spec */,enableSpecFilter:enableSpecFilter,specValue:spec,specOptions:specArr,setSpecHandler:handleSetSpec,setEnableSpecFilterHandler:handleSetUseSpecFilter/* filtering region */,enableRegionFilter:enableRegionFilter,regionValue:region,regionOptions:regionArr,setRegionHandler:handleSetRegion,setEnableRegionFilterHandler:handleSetUseRegionFilter}),!fail?loaded?error?/*#__PURE__*/_jsx(\"h1\",{children:error}):/*#__PURE__*/_jsx(DataTable,{data:data,minPrice:minPrice,maxPrice:maxPrice,minFloor:minFloor,maxFloor:maxFloor,minUsableArea:minUsableArea,maxUsableArea:maxUsableArea,estate:estate,enableEstateFilter:enableEstateFilter,spec:spec,enableSpecFilter:enableSpecFilter,region:region,enableRegionFilter:enableRegionFilter}):/*#__PURE__*/_jsx(\"h1\",{children:\"Still loading data...\"}):/*#__PURE__*/_jsx(\"h1\",{children:\"Failed to fetch data...\"})]});}export default App;","map":{"version":3,"sources":["/Users/eddie.cm.lam/Desktop/eddie_proj/REdataProj/listingsviewapp/src/App.jsx"],"names":["React","useEffect","useReducer","XLSX","DataTable","Filters","reducer","state","action","type","payload","filtersCollapsed","dataReady","data","loaded","fail","minPrice","maxPrice","estate","error","enableEstateFilter","minFloor","maxFloor","spec","enableSpecFilter","region","enableRegionFilter","minUsableArea","maxUsableArea","App","initialState","dispatch","readFile","file","promise","Promise","res","rej","fileReader","FileReader","readAsArrayBuffer","onload","e","arrayBuffer","target","result","workbook","read","worksheetName","SheetNames","workSheet","Sheets","utils","sheet_to_json","onerror","err","then","d","fetch","headers","response","json","catch","handleSetMinPrice","value","handleSetMaxPrice","handleSetMinFloor","handleSetMaxFloor","handleSetEstate","handleSetUseEstateFilter","handleSetSpec","handleSetUseSpecFilter","handleSetRegion","handleSetUseRegionFilter","handleSetMinUsableArea","handleSetMaxUsableArea","handleCollapseFilters","estateArr","map","obj","indexOf","Estate","push","specArr","Spec","regionArr","Region"],"mappings":"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","sourcesContent":["import React, { useEffect, useReducer } from \"react\";\nimport XLSX from \"xlsx\";\nimport DataTable from \"./components/DataTable\";\nimport Filters from \"./components/Filters\";\n\nfunction reducer(state, action) {\n  const { type, payload } = action;\n\n  switch (type) {\n    case \"COLLAPSE_FILTERS\":\n      return {...state, filtersCollapsed: payload};\n    case \"SET_DATAREADY\":\n      return { ...state, dataReady: payload };\n    case \"UPDATE_DATA\":\n      return { ...state, data: payload };\n    case \"SET_LOADED\":\n      return { ...state, loaded: payload };\n    case \"SET_FAIL\":\n      return { ...state, fail: payload };\n    case \"SET_MINPRICE\":\n      return { ...state, minPrice: payload };\n    case \"SET_MAXPRICE\":\n      return { ...state, maxPrice: payload };\n    case \"SET_ESTATE\":\n      return { ...state, estate: payload };\n    case \"SET_ERROR\":\n      return { ...state, error: payload };\n    case \"ENABLE_ESTATEFILTER\":\n      return {...state, enableEstateFilter: payload};\n    case \"SET_MINFLOOR\":\n      return {...state, minFloor: payload};\n    case \"SET_MAXFLOOR\":\n      return {...state, maxFloor: payload};\n    case \"SET_SPEC\":\n      return {...state, spec: payload};\n    case \"ENABLE_SPECFILTER\":\n      return {...state, enableSpecFilter: payload};\n    case \"SET_REGION\":\n      return {...state, region: payload};\n    case \"ENABLE_REGIONFILTER\":\n      return {...state, enableRegionFilter: payload};\n    case \"SET_MINUSABLEAREA\":\n      return {...state, minUsableArea: payload};\n    case \"SET_MAXUSABLEAREA\":\n      return {...state, maxUsableArea: payload};\n    default:\n      return state;\n  }\n}\n\nfunction App() {\n  const initialState = {\n    data: [],\n    filtersCollapsed: false,\n    loaded: false,\n    fail: false,\n    minPrice: 0,\n    maxPrice: '',\n    minFloor: 0,\n    maxFloor: '',\n    error: false,\n    estate: \"\",\n    enableEstateFilter: false,\n    spec:\"\",\n    enableSpecFilter: false,\n    region: \"\",\n    enableRegionFilter: false,\n    minUsableArea: 0,\n    maxUsableArea: ''\n  };\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const { \n    data, \n    filtersCollapsed,\n    loaded, fail, error,\n    minPrice, maxPrice, \n    minFloor, maxFloor,\n    estate, enableEstateFilter,\n    spec, enableSpecFilter,\n    region, enableRegionFilter,\n    minUsableArea, maxUsableArea\n  } = state;\n\n  /**\n   * triggered when user uploads a file;\n   * mainly for updating file if need be\n   */\n  const readFile = (file) => {\n    const promise = new Promise((res, rej) => {\n      /* read file */\n      const fileReader = new FileReader();\n      fileReader.readAsArrayBuffer(file);\n\n      fileReader.onload = (e) => {\n        const arrayBuffer = e.target.result;\n        /* now can read workbook */\n        const workbook = XLSX.read(arrayBuffer, { type: \"buffer\" });\n        const worksheetName = workbook.SheetNames[0];\n        const workSheet = workbook.Sheets[worksheetName];\n        const data = XLSX.utils.sheet_to_json(workSheet);\n        res(data);\n      };\n\n      fileReader.onerror = (err) => rej(err);\n    });\n\n    promise.then((d) => {\n      dispatch({ type: \"UPDATE_DATA\", payload: d[0] });\n      dispatch({ type: \"SET_LOADED\", payload: true });\n      return;\n    });\n  };\n\n  /* fetching data and update data state on mount */\n  useEffect(() => {\n    /* fetch data from ./public/data.json */\n    fetch(\"data.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        dispatch({ type: \"UPDATE_DATA\", payload: data[0] });\n        dispatch({ type: \"SET_ESTATE\", payload: data[0][0][\"Estate\"] });\n        dispatch({ type: \"SET_SPEC\", payload: data[0][0][\"Spec\"] });\n        dispatch({ type: \"SET_REGION\", payload: data[0][0][\"Region\"] });\n        dispatch({ type: \"SET_LOADED\", payload: true });\n        return;\n      })\n      .catch((err) => {\n        dispatch({ type: \"SET_LOADED\", payload: true });\n        dispatch({ type: \"SET_FAIL\", payload: true });\n        throw err;\n      });\n  }, []);\n\n  const handleSetMinPrice = (e) => {\n    dispatch({ type: \"SET_MINPRICE\", payload: e.target.value });\n  };\n\n  const handleSetMaxPrice = (e) => {\n    dispatch({ type: \"SET_MAXPRICE\", payload: e.target.value });\n  };\n\n  const handleSetMinFloor = (e) => {\n    dispatch({type: 'SET_MINFLOOR', payload: e.target.value})\n  }\n\n  const handleSetMaxFloor = (e) => {\n    dispatch({type: 'SET_MAXFLOOR', payload: e.target.value})\n  }\n\n  const handleSetEstate = (e) => {\n    dispatch({ type: \"SET_ESTATE\", payload: e.target.value });\n  };\n\n  const handleSetUseEstateFilter = () => {\n    dispatch({type: \"ENABLE_ESTATEFILTER\", payload: !enableEstateFilter});\n  }\n\n  const handleSetSpec = (e) => {\n    dispatch({type: \"SET_SPEC\", payload: e.target.value})\n  }\n\n  const handleSetUseSpecFilter = () => {\n    dispatch({type: \"ENABLE_SPECFILTER\", payload: !enableSpecFilter});\n  }\n\n  const handleSetRegion = (e) => {\n    dispatch({type: \"SET_REGION\", payload: e.target.value})\n  }\n\n  const handleSetUseRegionFilter = () => {\n    dispatch({type: \"ENABLE_REGIONFILTER\", payload: !enableRegionFilter});\n  }\n\n  const handleSetMinUsableArea = (e) => {\n    dispatch({type: \"SET_MINUSABLEAREA\", payload: e.target.value})\n  }\n\n  const handleSetMaxUsableArea = (e) => {\n    dispatch({type: \"SET_MAXUSABLEAREA\", payload: e.target.value})\n  }\n\n  const handleCollapseFilters = () => {\n    dispatch({type: \"COLLAPSE_FILTERS\", payload: !filtersCollapsed})\n  }\n\n  // get Estate options\n  let estateArr = [];\n  data.map((obj) => {\n    return estateArr.indexOf(obj.Estate) === -1 && estateArr.push(obj.Estate);\n  });\n\n  // get Spec options\n  let specArr = [];\n  data.map(obj=>{\n    return specArr.indexOf(obj.Spec) === -1 && specArr.push(obj.Spec);\n  })\n\n  // get Region options\n  let regionArr = [];\n  data.map(obj=>{\n    return regionArr.indexOf(obj.Region) === -1 && regionArr.push(obj.Region);\n  })\n\n  return (\n    <div className=\"App\">\n\n      <div id=\"EddieLogo\">Eddie Lam <span>made this.</span></div>\n\n\n      {/* <input\n        type=\"file\"\n        name=\"XlFileLoader\"\n        id=\"XlFileLoader\"\n        accept=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\n        onChange={(e) => {\n          dispatch({ type: \"SET_LOADED\", payload: false });\n          const file = e.target.files[0];\n          readFile(file);\n        }}\n      /> */}\n\n      <Filters\n        /* collapse control */\n        filtersCollapsed={filtersCollapsed}\n        handleCollapseFilters={handleCollapseFilters}\n        /* filtering price */\n        minPrice={minPrice}\n        maxPrice={maxPrice}\n        setMinPriceHandler={handleSetMinPrice}\n        setMaxPriceHandler={handleSetMaxPrice}\n        /* filtering floors */\n        minFloor={minFloor}\n        maxFloor={maxFloor}\n        setMinFloorHandler={handleSetMinFloor}\n        setMaxFloorHandler={handleSetMaxFloor}\n        /* filtering usable area */ \n        minUsableArea={minUsableArea}\n        maxUsableArea={maxUsableArea}\n        setMinUsableAreaHandler={handleSetMinUsableArea}\n        setMaxUsableAreaHandler={handleSetMaxUsableArea}\n        /* filtering estates */\n        enableEstateFilter={enableEstateFilter}\n        estateValue={estate}\n        estateOptions={estateArr}\n        setEstateHandler={handleSetEstate}\n        setEnableEstateFilterHandler={handleSetUseEstateFilter}\n        /* filtering spec */\n        enableSpecFilter={enableSpecFilter}\n        specValue={spec}\n        specOptions={specArr}\n        setSpecHandler={handleSetSpec}\n        setEnableSpecFilterHandler={handleSetUseSpecFilter}\n        /* filtering region */\n        enableRegionFilter={enableRegionFilter}\n        regionValue={region}\n        regionOptions={regionArr}\n        setRegionHandler={handleSetRegion}\n        setEnableRegionFilterHandler={handleSetUseRegionFilter}\n      />\n\n      {!fail ? (\n        loaded ? (\n          error ? (\n            <h1>{error}</h1>\n          ) : (\n            <DataTable\n              data={data}\n              minPrice={minPrice}\n              maxPrice={maxPrice}\n              minFloor={minFloor}\n              maxFloor={maxFloor}\n              minUsableArea={minUsableArea}\n              maxUsableArea={maxUsableArea}\n              estate={estate}\n              enableEstateFilter={enableEstateFilter}\n              spec={spec}\n              enableSpecFilter={enableSpecFilter}\n              region={region}\n              enableRegionFilter={enableRegionFilter}\n            />\n          )\n        ) : (\n          <h1>Still loading data...</h1>\n        )\n      ) : (\n        <h1>Failed to fetch data...</h1>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}